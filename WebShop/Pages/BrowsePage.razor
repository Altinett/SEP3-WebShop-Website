@page "/browse"
@using global::Shared
@using BlazorWasm.Services.Http
@using BlazorWasm.Services
@inject IProductService ProductService


<Grid>
    @foreach (Product product in products)
    {
        <GridItem
            Id=@product.Id
            Img=@product.Img
            name=@product.name
            amount=@product.amount
            description=@product.description
            price=@product.price
            InStock=@product.InStock/>
    }

</Grid>
<Basket />



@code {

    private List<Product> products = new List<Product>();

    protected override async Task OnInitializedAsync()
    {
        Console.WriteLine("In init");
        await Edit();
    }

    private async Task Edit()
    {
        Console.WriteLine("In edit");
        try 
        {
            products = await ProductService.GetProducts();
            Console.WriteLine("AUM BUM BUM");
            foreach (var product in products)
            {
                Console.WriteLine("in foreach");

                if (product.amount > 0)
                    product.InStock = true;

                Console.WriteLine(product.ToString());
            }
    //SuccessMessage("Successfully fetched products.");
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
    //ErrorMessage("Something went wrong fetching the products.");
        }
    }

    
    //public List<Product> products;
    /*public List<Product> products = new()
    {

    };*/
    /*//
    private async Task Edit()
    {
        try 
        {
            List<Product> products2 = await ProductService.GetProducts();
            foreach (var VARIABLE in products2)
            {
                Console.WriteLine(VARIABLE.ToString());
                if (VARIABLE != null)
                new Product(VARIABLE);

            }
            
    //SuccessMessage("Successfully created user");
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
    //ErrorMessage("Something went wrong creating a user");
        }
    }

    protected override void OnInitialized()
    {
        Edit();
        base.OnInitialized();
    }
    
*/
    
    
    /*public List<Product> products = new()
    {

        
        
        new Product(
            1, 
            "https://i.ebayimg.com/images/g/h9UAAOSwpPNlLMxt/s-l500.jpg", 
            "AMD Ryzen 5 5600X 6-core 12-thread Processor", 
            98712.6, 
            true
            ),
        new Product(
            2, 
            "https://i.ebayimg.com/images/g/h9UAAOSwpPNlLMxt/s-l500.jpg", 
            "AMD Ryzen 5 5600X 6-core 12-thread Processor", 
            1528.6, 
            true
            ),
        new Product(
            3, 
            "https://i.ebayimg.com/images/g/h9UAAOSwpPNlLMxt/s-l500.jpg", 
            "AMD Ryzen 5 5600X 6-core 12-thread Processor", 
            3625.2, 
            false
            ),

    };*/

}